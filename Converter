package Calculator;

import java.util.Stack;
import java.util.StringTokenizer;

public class Converter
{
    private static String statement;
    private static String result;

    public Converter(String s)
    {
        statement = s;
        result = "";
        convertingInfixToPostfix(statement);
    }

    private static void convertingInfixToPostfix(String variableOfTheMethod) //zmienną tej metody jest
    {
        statement = variableOfTheMethod;
        Stack<String> stackOfSigns= new Stack<>();
        StringTokenizer stringTokenizerOfStatement = new StringTokenizer(variableOfTheMethod, "+-*/()", true);
        while (stringTokenizerOfStatement.hasMoreTokens())
        {
            String nextTokenFromStatement = stringTokenizerOfStatement.nextToken();
            if (isOperator(nextTokenFromStatement))
            {
                while(!stackOfSigns.empty() && priority(stackOfSigns.peek()) >= priority(nextTokenFromStatement))
                    result += stackOfSigns.pop() + " ";
                stackOfSigns.push(nextTokenFromStatement);
            }
            else if (nextTokenFromStatement.equals("(")) stackOfSigns.push(nextTokenFromStatement);
            else if (nextTokenFromStatement.equals(")"))
            {
                while(!stackOfSigns.peek().equals("(")) result += stackOfSigns.pop() + " ";
                stackOfSigns.pop();
            }
            else result += nextTokenFromStatement + " ";
        }
        while (!stackOfSigns.empty()) result += stackOfSigns.pop() + " "; //tutaj byćmoże trzeba będzie .length pozostałę
    }                                                                     //znaki i pomiędzy każdymi wstawiś spację

    public static Boolean isOperator(String n)
    {
        boolean bool = false;
        if (n.equals("+") || n.equals("-") || n.equals("*") || n.equals("/")) bool = true;
        return bool;
    }

    public static int priority(String operator)
    {
        if (operator.equals("+") || operator.equals("-")) return 1;
        else if (operator.equals("*") || operator.equals("/")) return 2;
        else return 0;
    }

    public static String getResult() {return result;}

    public static String getConverterStatement()
    {
        return statement;
    }
}
